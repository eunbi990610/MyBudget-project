<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mybudget.mapper.user.BudgetMapper">

<!--  카테고리 리스트 출력  -->
    <select id="selectAllCategories">
        select category_id, user_id, category_name, category_type, create_at
        from TBL_CATEGORY
        where USER_ID = #{userId} and IS_DELETED = 0;
    </select>

<!--    기본 지출 카테고리 생성 (회원가입 시 실행 )-->
    <insert id="insertDefaultCategories" useGeneratedKeys="true">
        INSERT INTO TBL_CATEGORY (USER_ID, CATEGORY_NAME, CATEGORY_TYPE)
        VALUES
        <foreach collection="categories" item="categoryName" separator=",">
            (#{userId}, #{categoryName}, 'EXPENSE')
        </foreach>
    </insert>

<!--  사용자 지정 카테고리 추가 -->
    <insert id="insertCategory" useGeneratedKeys="true" keyProperty="categoryId">
        insert into TBL_CATEGORY(user_id, category_name, category_type)
        values (#{userId}, #{categoryName},#{categoryType})
    </insert>

<!--  카테고리 수정  -->
    <update id="updateCategoryName">
        update TBL_CATEGORY set CATEGORY_NAME = #{categoryName}
        where USER_ID = #{userId} and CATEGORY_ID = #{categoryId}
    </update>


<!--  카테고리 소트프 삭제   -->
    <update id="softDeleteCategory">
        update TBL_CATEGORY set IS_DELETED = 1
        where USER_ID = #{userId} and CATEGORY_ID = #{categoryId}
    </update>


<!--    -->










</mapper>